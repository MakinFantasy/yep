<template>
  <form method="post" class="form" @submit.prevent="sendComment">

    <label class="form__label">
      <span class="form__text">Your name:</span>
      <my-input v-model.trim="formData.author" class="form__input" inputType="text" inputName="author"
        placeholder="Ivan Ivanov" required />
    </label>

    <label class="form__label">
      <span class="visually-hidden">Message:</span>
      <my-textarea v-model="formData.text" class="form__input" textareaName="text" placeholder="Lorem ipsum dolor sit amet, consectetur"
        rows="7" required></my-textarea>
    </label>

    <fieldset class="form__radio-list">
      <legend class="visually-hidden">Reaction:</legend>
      <label class="form__label">
        <span class="visually-hidden">Like</span>
        <input v-model="formData.reaction" type="radio" name="reaction" value="1" class="form__radio visually-hidden"
          required />



        <svg class="form__img" width="24" height="24" viewBox="0 0 24 24" stroke="#f5f5dc" fill="none" xmlns="http://www.w3.org/2000/svg">

          <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
          <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
          <g id="SVGRepo_iconCarrier">
            <path style="fill: #0e5300; stroke-width: 2"
              d="M23.3589 13.9234C23.3589 13.5488 23.2698 13.1883 23.0986 12.8624C23.6627 12.4321 24 11.7637 24 11.0383C24 9.77093 22.9689 8.73992 21.7016 8.73992H15.4784C16.0144 7.36929 16.3065 5.70579 16.3065 3.9859C16.3065 2.89531 15.4192 2.00806 14.3286 2.00806C13.238 2.00806 12.3508 2.89531 12.3508 3.9859C12.3508 7.88407 9.6315 10.801 5.58417 11.2442C5.55642 11.2473 5.52984 11.2534 5.50448 11.262C5.23838 11.0217 4.88602 10.875 4.5 10.875H1.5C0.672891 10.875 0 11.5479 0 12.375V19.5C0 20.3271 0.672891 21 1.5 21H4.5C4.95764 21 5.3678 20.7938 5.64319 20.4696C6.60286 20.6096 7.22494 20.9165 7.82606 21.2141C8.59875 21.5965 9.39778 21.992 10.8024 21.992H19.7783C21.0456 21.992 22.0766 20.9609 22.0766 19.6936C22.0766 19.319 21.9875 18.9585 21.8163 18.6326C22.3804 18.2023 22.7177 17.5339 22.7177 16.8085C22.7177 16.4339 22.6286 16.0734 22.4574 15.7475C23.0215 15.3172 23.3589 14.6488 23.3589 13.9234ZM21.8232 15.2685H21.1875C20.9804 15.2685 20.8125 15.4364 20.8125 15.6435C20.8125 15.8506 20.9804 16.0185 21.1875 16.0185H21.748C21.8915 16.2575 21.9677 16.5269 21.9677 16.8085C21.9677 17.376 21.6602 17.8911 21.1632 18.1641H20.4813C20.2742 18.1641 20.1063 18.332 20.1063 18.5391C20.1063 18.7462 20.2742 18.9141 20.4813 18.9141H21.1132C21.2526 19.1505 21.3266 19.4161 21.3266 19.6936C21.3266 20.5474 20.632 21.2419 19.7783 21.2419H10.8024C9.57323 21.2419 8.91773 20.9175 8.15878 20.5419C7.5795 20.2551 6.92902 19.9343 5.97628 19.764C5.99156 19.6782 6 19.5901 6 19.5V13.8282C6 13.6211 5.83209 13.4532 5.625 13.4532C5.41791 13.4532 5.25 13.6211 5.25 13.8282V19.5C5.25 19.9136 4.91353 20.25 4.5 20.25H1.5C1.08647 20.25 0.75 19.9136 0.75 19.5V12.375C0.75 11.9615 1.08647 11.625 1.5 11.625H4.5C4.91353 11.625 5.25 11.9615 5.25 12.375C5.25 12.5821 5.41791 12.75 5.625 12.75C5.83209 12.75 6 12.5821 6 12.375C6 12.2295 5.97877 12.0889 5.93991 11.9556C8.03888 11.6694 9.82195 10.7685 11.1095 9.3394C12.3936 7.91403 13.1008 6.01282 13.1008 3.9859C13.1008 3.30888 13.6515 2.75806 14.3286 2.75806C15.0056 2.75806 15.5564 3.30884 15.5564 3.9859C15.5564 5.82832 15.2065 7.59359 14.5712 8.95653C14.4837 9.14421 14.5649 9.36734 14.7526 9.45485C14.8138 9.48335 14.8786 9.49367 14.9413 9.48856C14.9507 9.48926 14.9601 9.49001 14.9697 9.49001H21.7015C22.5553 9.49001 23.2499 10.1846 23.2499 11.0384C23.2499 11.5914 22.958 12.0949 22.4831 12.3729H21.7811C21.574 12.3729 21.4061 12.5408 21.4061 12.7479C21.4061 12.955 21.574 13.1229 21.7811 13.1229H22.3828C22.5304 13.3645 22.6088 13.6377 22.6088 13.9234C22.6089 14.4837 22.3091 14.9929 21.8232 15.2685Z"
              fill="black" />
            <path style="fill: #0e5300; stroke-width: 2"
              d="M19.7993 15.2685H19.3997C19.1926 15.2685 19.0247 15.4364 19.0247 15.6435C19.0247 15.8506 19.1926 16.0185 19.3997 16.0185H19.7993C20.0064 16.0185 20.1743 15.8506 20.1743 15.6435C20.1743 15.4364 20.0064 15.2685 19.7993 15.2685Z"
              fill="black" />
            <path
              d="M20.4813 12.3728H20.0817C19.8746 12.3728 19.7067 12.5407 19.7067 12.7478C19.7067 12.9549 19.8746 13.1228 20.0817 13.1228H20.4813C20.6884 13.1228 20.8563 12.9549 20.8563 12.7478C20.8563 12.5407 20.6884 12.3728 20.4813 12.3728Z"
              fill="black" />
            <path style="fill: #0e5300; stroke-width: 2"
              d="M19.1172 18.1641H18.7176C18.5105 18.1641 18.3426 18.332 18.3426 18.5391C18.3426 18.7462 18.5105 18.9141 18.7176 18.9141H19.1172C19.3243 18.9141 19.4922 18.7462 19.4922 18.5391C19.4922 18.332 19.3243 18.1641 19.1172 18.1641Z"
              fill="black" />
            <path style="fill: #0e5300; stroke-width: 2;"
              d="M3.75 12.375C3.33647 12.375 3 12.7115 3 13.125C3 13.5385 3.33647 13.875 3.75 13.875C4.16353 13.875 4.5 13.5385 4.5 13.125C4.5 12.7115 4.16353 12.375 3.75 12.375Z"
              fill="black" />
          </g>
        </svg>





      </label>
      <label class="form__label">
        <span class="visually-hidden"> Neutral </span>
        <input v-model="formData.reaction" type="radio" required name="reaction" value="0"
          class="form__radio visually-hidden" checked />
        <svg class="form__img" stroke="#f5f5dc" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <g id="SVGRepo_iconCarrier">
            <path
              d="M4 12C4 7.58172 7.58172 4 12 4C16.4183 4 20 7.58172 20 12C20 16.4183 16.4183 20 12 20C7.58172 20 4 16.4183 4 12ZM12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2ZM9 11.5C9.82843 11.5 10.5 10.8284 10.5 10C10.5 9.17157 9.82843 8.5 9 8.5C8.17157 8.5 7.5 9.17157 7.5 10C7.5 10.8284 8.17157 11.5 9 11.5ZM16.5 10C16.5 10.8284 15.8284 11.5 15 11.5C14.1716 11.5 13.5 10.8284 13.5 10C13.5 9.17157 14.1716 8.5 15 8.5C15.8284 8.5 16.5 9.17157 16.5 10ZM9 17C8.44772 17 8 16.5523 8 16C8 15.4477 8.44772 15 9 15H15C15.5523 15 16 15.4477 16 16C16 16.5523 15.5523 17 15 17H9Z"
              fill="#000000"></path>
          </g>
        </svg>
      </label>
      <label class="form__label">
        <span class="visually-hidden">Dislike</span>
        <input v-model="formData.reaction" type="radio" name="reaction" value="-1" class="form__radio visually-hidden"
          required />

        <svg class="form__img" stroke="#f5f5dc" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
          <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
          <g id="SVGRepo_iconCarrier"></g>
          <path style="fill: #ff0000; stroke-width: 2"
            d="M0.641109 10.0766C0.641109 10.4512 0.730219 10.8117 0.901407 11.1376C0.337313 11.5679 0 12.2363 0 12.9617C0 14.2291 1.03106 15.2601 2.29838 15.2601H8.52159C7.98563 16.6307 7.69355 18.2942 7.69355 20.0141C7.69355 21.1047 8.5808 21.9919 9.67139 21.9919C10.762 21.9919 11.6492 21.1047 11.6492 20.0141C11.6492 16.1159 14.3685 13.199 18.4158 12.7558C18.4436 12.7527 18.4702 12.7466 18.4955 12.738C18.7616 12.9783 19.114 13.125 19.5 13.125H22.5C23.3271 13.125 24 12.4521 24 11.625V4.49998C24 3.67287 23.3271 2.99998 22.5 2.99998H19.5C19.0424 2.99998 18.6322 3.20623 18.3568 3.53037C17.3971 3.39035 16.7751 3.08346 16.1739 2.7859C15.4013 2.40349 14.6022 2.00801 13.1976 2.00801H4.22175C2.95439 2.00801 1.92338 3.03907 1.92338 4.30638C1.92338 4.68096 2.01248 5.04152 2.18367 5.3674C1.61958 5.79771 1.28227 6.46605 1.28227 7.19149C1.28227 7.56607 1.37137 7.92663 1.54256 8.25251C0.978468 8.68282 0.641109 9.35121 0.641109 10.0766ZM2.17683 8.73152H2.8125C3.01959 8.73152 3.1875 8.56362 3.1875 8.35652C3.1875 8.14943 3.01959 7.98152 2.8125 7.98152H2.25197C2.10848 7.74246 2.03227 7.47307 2.03227 7.19149C2.03227 6.62402 2.33977 6.10887 2.83678 5.83591H3.51872C3.72581 5.83591 3.89372 5.66801 3.89372 5.46091C3.89372 5.25382 3.72581 5.08591 3.51872 5.08591H2.8868C2.74744 4.84948 2.67338 4.58388 2.67338 4.30643C2.67338 3.45265 3.36797 2.75805 4.22175 2.75805H13.1976C14.4268 2.75805 15.0823 3.08247 15.8412 3.45813C16.4205 3.74487 17.071 4.06568 18.0237 4.23598C18.0084 4.32176 18 4.40988 18 4.49998V10.1718C18 10.3789 18.1679 10.5468 18.375 10.5468C18.5821 10.5468 18.75 10.3789 18.75 10.1718V4.49998C18.75 4.08644 19.0865 3.74998 19.5 3.74998H22.5C22.9135 3.74998 23.25 4.08644 23.25 4.49998V11.625C23.25 12.0385 22.9135 12.375 22.5 12.375H19.5C19.0865 12.375 18.75 12.0385 18.75 11.625C18.75 11.4179 18.5821 11.25 18.375 11.25C18.1679 11.25 18 11.4179 18 11.625C18 11.7705 18.0212 11.9111 18.0601 12.0444C15.9611 12.3306 14.178 13.2315 12.8905 14.6606C11.6064 16.086 10.8992 17.9872 10.8992 20.0141C10.8992 20.6911 10.3485 21.2419 9.67144 21.2419C8.99442 21.2419 8.44359 20.6912 8.44359 20.0141C8.44359 18.1717 8.79347 16.4064 9.42881 15.0435C9.51633 14.8558 9.43509 14.6327 9.24736 14.5451C9.18623 14.5166 9.12141 14.5063 9.05869 14.5114C9.04927 14.5107 9.03989 14.51 9.03033 14.51H2.29847C1.44469 14.51 0.750094 13.8154 0.750094 12.9616C0.750094 12.4086 1.04203 11.9051 1.51692 11.6271H2.21887C2.42597 11.6271 2.59387 11.4592 2.59387 11.2521C2.59387 11.045 2.42597 10.8771 2.21887 10.8771H1.61723C1.46963 10.6355 1.3912 10.3623 1.3912 10.0766C1.39111 9.5163 1.69092 9.0071 2.17683 8.73152Z"
            fill="black" />
          <path style="fill: #ff0000; stroke-width: 2"
            d="M4.20073 8.73151H4.60034C4.80744 8.73151 4.97534 8.5636 4.97534 8.35651C4.97534 8.14941 4.80744 7.98151 4.60034 7.98151H4.20073C3.99364 7.98151 3.82573 8.14941 3.82573 8.35651C3.82573 8.5636 3.99364 8.73151 4.20073 8.73151Z"
            fill="black" />
          <path style="fill: #ff0000; stroke-width: 2"
            d="M3.51873 11.6272H3.91833C4.12543 11.6272 4.29333 11.4593 4.29333 11.2522C4.29333 11.0451 4.12543 10.8772 3.91833 10.8772H3.51873C3.31163 10.8772 3.14373 11.0451 3.14373 11.2522C3.14373 11.4593 3.31163 11.6272 3.51873 11.6272Z"
            fill="black" />
          <path style="fill: #ff0000; stroke-width: 2"
            d="M4.88283 5.83594H5.28244C5.48953 5.83594 5.65744 5.66803 5.65744 5.46094C5.65744 5.25384 5.48953 5.08594 5.28244 5.08594H4.88283C4.67574 5.08594 4.50783 5.25384 4.50783 5.46094C4.50783 5.66803 4.67569 5.83594 4.88283 5.83594Z"
            fill="black" />
          <path style="fill: #ff0000; stroke-width: 2"
            d="M20.25 11.625C20.6635 11.625 21 11.2885 21 10.875C21 10.4615 20.6635 10.125 20.25 10.125C19.8365 10.125 19.5 10.4615 19.5 10.875C19.5 11.2885 19.8365 11.625 20.25 11.625Z"
            fill="black" />
        </svg>

      </label>
    </fieldset>
    <my-button class="button form__button" :disabled="!formValid || appSending">
      Submit
    </my-button>
  </form>
</template>

<script>
export default {
  props: {
    parentId: {
      type: Number,
      default: null,
    },
  },

  data() {
    return {
      formData: {
        author: '',
        text: '',
        reaction: 0,
        parentId: null,
      },
    };
  },

  computed: {
    formValid() {
      if (!this.formData.author || !this.formData.text) return false;
      return true;
    },
    appSending() {
      if (!this.$root.appSending) this.resetForm();
      return this.$root.appSending;
    },
  },

  methods: {
    sendComment() {
      this.formData = {
        author: this.formData.author,
        text: this.formData.text,
        reaction: +this.formData.reaction,
        parentId: this.parentId,
      };
      this.$emit('send', this.formData);
    },

    resetForm() {
      this.formData = {
        author: this.formData.author,
        text: '',
        reaction: 0,
        parentId: null,
      };
    },
  },
};
</script>

<style scoped lang="scss">
@use '@/assets/scss/function' as *;
@use '@/assets/scss/variables' as *;
@use '@/assets/scss/mixin' as *;

.form {
  display: flex;
  flex-direction: column;
  max-width: 600px;
  margin: 15px auto 0;
  padding: 15px;
  border: 3px solid color(primaryTitleColor);
  border-radius: 10px;
  background-color: color(background);
}

.form__radio-list {
  display: flex;
  margin-top: 15px;
  gap: 20px;

  .form__label {
    margin-top: 0;
  }
}

.form__label {
  margin-top: 15px;
}

.form__text {
  font-size: 1.4rem;
  font-weight: 600;
}

.form__text+.form__input {
  margin-top: 7px;
}

.form__radio+.form__text {
  font-size: 2rem;
}

.form__img {
  width: 2rem;
}

.form__radio:checked+.form__img {
  border-bottom: 2px solid color(primaryTitleColor);
  opacity: 1;
  transition: all 0.3s linear;
}

.form__radio+.form__img {
  opacity: 0.5;
}

.form__button {
  margin-top: 15px;
  align-self: flex-end;
}</style>
